<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- * -->
  <h2>입력한 값보다 나이 많은 사람찾기</h2>
  <input type="number" id="ageCheck">
  <button type="button" onclick="searchFunc()">검색</button>

  <hr>

  <!-- ** -->
  <div class="protoss">
    <p>zealot</p>
    <p>dragoon</p>
    <p>observer</p>
  </div>
  <script>
    // 유용한 배열메소드 (ES5)

    // 1. ★ array.map(function(currentValue, index))
    // 배열의 모든 값에 10을 곱한 새 배열 만들기
    const numbers = [65, 44, 12, 4];
    // const newNum = numbers.map(function (ten) {
    //   return ten * 10;
    // })
    // console.log(newNum);
    const newNum = numbers.map(ten => ten * 10);
    console.log(numbers);
    console.log(newNum);

    // Quiz
    // 각 사람의 전체 이름을 가진 새 배열 만들기
    // 예상 결과: ['Goni Kim', 'Zero Cho', 'Velopert Kim']
    const persons = [
      { firstName: 'Goni', lastName: 'Kim' },
      { firstName: 'Zero', lastName: 'Cho' },
      { firstName: 'Velopert', lastName: 'Kim' }
    ];
    const newPersons = persons.map(function ({ firstName, lastName }) {
      return firstName + ' ' + lastName
    });
    console.log(newPersons);

    // 2.★array.filter(function(currentValue, index)
    // 위의 테스트함수를 통과하는 요소들만 추출하여 새배열

    // ages배열에서 19세 이상 새배열 만들기
    const ages = [17, 31, 28, 22, 19];
    const adult = ages.filter(function (ageNum) {
      return ageNum >= 19;
    });
    // const adult = ages.filter(ageNum => ageNum >= 19);
    console.log(adult);

    // 활용 Tip1 : 검색 또는 필터링 기능 만들기
    // *참조
    const terran = [
      { name: 'marine', age: 27 },
      { name: 'medic', age: 40 },
      { name: 'scv', age: 36 },
      { name: 'ghost', age: 22 },
      { name: ' Vulture', age: 26 },
    ];

    function searchFunc() {
      const ageValue = document.querySelector('#ageCheck').value;
      const newTerran = terran.filter(function (terran) {
        return ageValue < terran.age;
      })
      console.log(newTerran);
    }

    // 활용 tip2: 삭제기능
    // filter는 걸러내는 기능인데 어떻게 걸러내느냐에 따라 검색뿐만 아니라 삭제할 때도 유용
    const products = [
      { id: '1', title: 'snack', price: 1000 },
      { id: '2', title: 'pen', price: 2000 },
      { id: '3', title: 'candy', price: 500 },
      { id: '4', title: 'note', price: 1800 },
      { id: '5', title: 'case', price: 2300 }
    ];
    // Quiz: 배열의 filter() 함수를 사용하여 id 같이 2인 상품을 제거해보세요

    // const newProducts = products.filter(({ id }) => {
    //   if (id != '2') {
    //     return products;
    //   }
    // })
    // console.log(newProducts);
    const pro = products.filter(function (product) {
      return product.id != '2';
    });
    console.log(pro);

    // 3. array.reduce(function(total, currentValue, currentIndex), initialValue)
    // (누적값, 배열 요소 하나하나, 인덱스번호), 초기값
    // 배열의 각 요소를 순회하며 콜백 함수의 실행값을 누적하여 반환
    // 원래 배열을 변경하지 않음

    // 배열의 모든 숫자에 반올림하여 종합구하기
    const floatNum = [1.2, 25.2, 3.9, 4.8, 5.5];
    // const sum = floatNumbers.reduce((total, num) => {
    //   return total + Math.round(num);
    // }, 0);
    const sum = floatNum.reduce((total, num) => total + Math.round(num), 0);
    console.log(sum);

    // 주로 장바구니 총합구할때!

    // 새로운 배열 메소드 (ES6)

    // 1. Array.from(object, mapfunction)
    // index와 lengh를 갖는 객체. 유사배열 배열 변환 기기
    // 1)문자열에서 배열 만들기
    const strArray = Array.from('COMPUTER');
    console.log(strArray);

    // 2-1) nodeList에서 배열만들기
    // **참조
    const protoss = document.querySelectorAll('.protoss p');
    console.log(protoss);

    // 실제 배열변환
    const protossArray = Array.from(protoss);
    console.log(protossArray);

    // 반환 후 map() 함수 사용 가능
    // p태그의 텍스트 내용을 가져와서 새로운 배열 만들기
    const protossUnit = protossArray.map((protoss) => {
      return protoss.textContent;
    })
    console.log(protossUnit);

    // 2. Array.of(가변 인자)
    const digits = Array.of('가', '나', '다', 'a', 'b', 'c');
    console.log(digits);
  </script>
</body>

</html>